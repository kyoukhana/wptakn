(function(e){e.fn.jegbg=function(t,n,r){var i=Array();var s=-1;var o=0;var u=0;var a=false;var f=e(this);var l=Math.random();var c=null;var h=false;var p=false;if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)){h=true}var d=true;VIDEO="video";IMAGE="image";NEXT="next";PREV="prev";var v={autoplay:1,show_video_control:0,delay:6e3,random:false,fade_speed:1500,loader_fade:1e3,partial_load:true,autostart:true,content:null,nocrop:false};n=n||e.noop;r=r||e.noop;if(t){var t=e.extend(v,t)}else{var t=e.extend(v)}var m=function(){e(f).prepend('<div id="bgcontainer"></div>').prepend('<div class="lio-loader"></div>')};var g=function(){e(".lio-loader").stop().fadeOut(t.loader_fade,function(){e(this).css({height:"",margin:"",opacity:"",overflow:"",padding:"",width:"",display:"none"})})};var y=function(){e(".lio-loader").stop().show(t.loader_fade)};var b=function(){d=true};var w=function(){d=false;tt()};var E=function(){return d};var S=function(t,n){var r,i,s,o;var u=e(t).height();var a=e(t).width();if(u==0){u=t.height;a=t.width}var l=(u/a).toFixed(2);var c=e(f).height();var h=e(f).width();var p=c/h.toFixed(2);var d=function(){i=h;r=h*l;o=(h-i)/2;s=(c-r)/2;return new Array(r,i,o,s)};var v=function(){i=c/l;r=c;o=(h-i)/2;s=(c-r)/2;return new Array(r,i,o,s)};if(n){if(p>l){return 0&&l<=1?v():d()}else{return 0&&l>1?d():v()}}else{if(p>l){return 0&&l<=1?d():v()}else{return 0&&l>1?v():d()}}};var x=function(){C();g()};var T=function(r){n.call(this,i[s],r);e("#bgcontainer").append(r);e(r).fadeIn(t.fade_speed,function(){e(this).addClass("curmedia")})};var N=function(n){b();var r=new Image;e(r).load(function(){var e=new Image;e.src=i[n].source;e=W(e,true,i[n].pos,i[n].nocrop);x();T(e);w();if(!p){clearTimeout(o);o=setTimeout(function(){et()},t.delay)}}).error(function(){et()}).attr("src",i[n].source)};var C=function(){if(e("#bgcontainer .curmedia").length>0){if(F()){B()}else{e("#bgcontainer .curmedia").stop().fadeOut(t.fade_speed,function(){e(this).remove()})}}};var k=function(e){if(e=="mp4"||e=="webm"||e=="ogg"){if(Modernizr.video){if(Modernizr.video["h264"]&&e=="mp4"){return"video/mp4"}else if(Modernizr.video["webm"]&&e=="webm"){return"video/webm"}else if(Modernizr.video["ogg"]&&e=="ogg"){return"video/ogg"}else{return false}}else{return false}}else{return false}};var L=function(e){if(e=="mp4"){return"video/mp4"}else if(e=="webm"){return"video/webm"}else if(e=="ogg"){return"video/ogg"}else{return false}};var A=function(t){var n='<video id="html5video" style="display : none;" width="'+e(f).width()+'" height="'+e(f).height()+'" autoplay=1></video>';var r="";for(var i=0;i<t.length;i++){var s=L(t[i].videotype);r=r+'<source src="'+t[i].src+'" type="'+s+'" />'}return e(n).append(r)};var O=function(){if(e("#bgcontainer video").length>0){return true}else{return false}};var M=function(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var n=e.match(t);if(n&&n[7].length==11){return n[7]}else{alert("Url Incorrect")}};var _=function(e){if(e.data==YT.PlayerState.ENDED){et();B()}};var D=function(){if(typeof player.stopVideo=="function"){player.stopVideo()}};var P=function(){if(typeof player.pauseVideo=="function"){player.pauseVideo()}};var H=function(){if(typeof player.playVideo=="function"){player.playVideo()}};var B=function(){D();setTimeout(function(){e("iframe#ytmedia").remove();player=null},t.loader_fade)};var j=function(){n.call(this,i[s],e("#curmedia"));if(h){H()}};var F=function(){if(e("#ytmedia").length>0){if(e("#ytmedia").hasClass("curmedia")){return true}else{return false}}else{return false}};var I=function(t){var n;for(var r=0;r<t.length;r++){var i=t[r].videotype;if(i=="youtube"){n=t[r].src;break}}e("#bgcontainer").append('<div id="ytmedia"></div>');var s=M(n);var o=null;if(h){o={autoplay:0,controls:1,showinfo:0,rel:0,wmode:"opaque",vq:"hd720",hd:1};alert(o)}else{o={autoplay:1,controls:0,showinfo:0,rel:0,wmode:"opaque",vq:"hd720",hd:1}}var u=function(){player=new YT.Player("ytmedia",{height:e(f).height(),width:e(f).width(),videoId:s,playerVars:o,events:{onReady:j,onStateChange:_}});e("div#ytmedia").remove()};var a=function(){setTimeout(function(){if(typeof YT==="undefined"){a()}else{u()}},1e3)};a()};var q=function(e){};var R=function(e,t){if(t[0]==true){return{tagbehaviour:0,videotag:A(e)}}else if(t[1]==true){return{tagbehaviour:1,videotag:I(e)}}else if(t[3]==true){return{tagbehaviour:3,videotag:q(e)}}};var U=function(e){var t=new Array;for(var n=0;n<4;n++)t[n]=false;for(var n=0;n<e.length;n++){var r=e[n].videotype;var i=k(e[n].videotype);if((r=="mp4"||r=="webm"||r=="ogg")&&i){if(i)t[0]=true}else if(r=="youtube"){t[1]=true}else if(r=="vimeo"){t[2]=true}else{if(r=="mp4"||r=="flv"){t[3]=true}}}return R(e,t)};var z=function(t){var n=U(e(i[t].source));var r=n.videotag;var s=n.tagbehaviour;x();if(s==0){T(r);e(r).bind("ended",function(){et()})}else if(s==1){e("#ytmedia").addClass("curmedia")}else if(s==3){e("#ytmedia").addClass("curmedia")}w()};var W=function(t,n,r,i){var s=S(t,i);e(t).css("height",s[0]).css("width",s[1]).css("left",s[2]).css("max-width","200%");if(n){e(t).css({display:"none"})}if(r=="top"){e(t).css("top",0)}else if(r=="bottom"){e(t).css("bottom",0)}else if(r=="center"){e(t).css("top",s[3])}e(t).addClass("nextmedia");return t};var X=function(){W(e("#bgcontainer .curmedia"),false,i[s].pos,i[s].nocrop)};var V=function(){e("#bgcontainer .curmedia").width(e(f).width()).height(e(f).height())};var J=function(){if(i[s]!==undefined){if(i[s].type==IMAGE){X()}else if(i[s].type==VIDEO){V()}}};var K=function(){if(t.random==false){s=(s+1)%i.length}else{var e=s;s=Math.floor(Math.random()*i.length);if(e==s&&i.length>1){K()}}};var Q=function(){s=s-1;if(s<0){s=i.length-1}};var G=function(){if(F()){B()}clearTimeout(o)};var Y=function(){if(F()){P()}else if(O()){player=document.getElementById("html5video");player.pause()}clearTimeout(o);return true};var Z=function(){a=false;if(F()){H()}else if(O()){player=document.getElementById("html5video");player.play()}else{clearTimeout(o);o=setTimeout(function(){et()},t.delay)}return false};var et=function(e){y();var t=s;a=false;if(typeof e=="undefined"){K()}else if(e==NEXT){K()}else if(e==PREV){Q()}if(s>=0)r.call(this,i[t],i[s]);if(i[s].type==IMAGE){unmuteplayer();N(s)}else if(i[s].type==VIDEO){muteplayer();setTimeout(function(){z(s)},3e3)}};var tt=function(){var t=s+1;if(t<=i.length-1){if(i[t].type==IMAGE){var n=new Image;e(n).attr("src",i[t].source)}}var r=s-1;if(r>=0){if(i[r].type==IMAGE){var n=new Image;e(n).attr("src",i[r].source)}}};var nt=function(t){if(t<=i.length-1){if(i[t].type==IMAGE){var n=new Image;e(n).load(function(){nt(++t)}).attr("src",i[t].source)}}else{et()}};var rt=function(e){if(!E()){G();et(e)}};var it=function(){a=a==false?Y():Z();return false};var st=function(e){n=e};var ot=function(e){r=e};var ut=function(){var n=0;m();i=t.content;if(i.length==1){p=true;e(".navleft",f).hide();e(".navright",f).hide()}if(t.partial_load){et();e(window).resize(function(){J()})}else{e(window).load(function(){nt(0)})}e(window).resize(function(){J()});e(window).stop().keydown(function(e){if(e.keyCode==37){if(!p){rt(PREV);return false}}else if(e.keyCode==39){if(!p){rt(NEXT);return false}}else if(e.keyCode==32){it()}});if(!p){e(".navleft",f).click(function(){rt(PREV)});e(".navright",f).click(function(){rt(NEXT)})}if(!p){e("#bgcontainer",f).touchwipe({wipeLeft:function(e){rt(NEXT);return false},wipeRight:function(){rt(PREV);return false},min_move_x:20,min_move_y:20,preventDefaultEvents:true})}e(window).bind("jmainremove",function(){G();e(window).unbind("keydown");e(window).unbind("resize");delete e.fn.jegbg})};var at=function(){rt(PREV)};var ft=function(){rt(NEXT)};if(t.autostart){ut()}return{next:at,prev:ft,start:ut,pause:it,restart:Z,set_start_callback:st,set_end_callback:ot}}})(jQuery)